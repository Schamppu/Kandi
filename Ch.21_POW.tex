\section{Proof-of-Work (PoW)\label{pow}}
\begin{otherlanguage}{english}
% Oikoluettu: X 
Proof-of-Work, josta tässä tutkielmassa käytetään lyhennettä PoW, on tutkielman kirjoittamisen hetkellä markkinaosuudeltaan suurin konsensusmekanismi. PoW:ta käyttää kaksi suurinta lohkoketjua: Bitcoin ja Ethereum \cite{Coingecko}.

\begin{figure}[!htbp]
\centering
\fbox{\includegraphics[width=0.98\textwidth]{proof-of-work}}
\caption{Esimerkki Proof-of-Work ja Proof-of-Space konsensusmekanismien toimintaperiaatteesta}
\label{fig_pow}
\end{figure}

\vspace{1mm}

PoW vaatii, että sen turvaamiseen osallistuvat käyttäjät, joita kutsutaan louhijoiksi (eng. \textit{miners}), ratkaisevat kryptografisen ongelman varmistaakseen, että lohkoketjuun lisätty lohko on oikea \cite{blockchain1}. Ongelman ratkaisemisen jälkeen oikean ratkaisun löytäneelle käyttäjälle annetaan palkkio (eng. \textit{block reward}). Kaavio \ref{fig_pow} näyttää millaisista vaiheista uusien lohkojen lisääminen koostuu. Tätä kokonaisuutta millä lohkoketjua turvataan kutsutaan louhinnaksi (eng. \textit{mining}) ja tämä tutkielma käyttää myös kyseistä termiä viitatessaan lohkoketjun turvaamisprosessiin. PoW-lohkoketjujen sisältämää dataa ja toimintaa esitellään tutkielman johdannossa taulukossa \ref{table-pow-database}.

Kaavio \ref{fig_pow} esittää, miten uuden lohkon luominen, varmentaminen, ja lisääminen tapahtuu. Tämä kolmeen vaiheeseen (luonti, louhinta, palkitseminen) jaettu prosessi toimii tarkemmin selitettynä seuraavalla tavalla:

\begin{enumerate}
\item Luodaan siirtotapahtumia sisältävä lohko. Taulukossa \ref{table-pow-database} esiteltiin, millaista dataa lohkoketjun lohkot sisältävät. Kaavion \ref{fig_pow} ensimmäisessä vaiheessa luodaan uusi lohko, missä louhinnan kannalta olennaisinta on siitä luotu tiiviste.
\item Louhijat pyrkivät ratkaisemaan lohkon tiivisteeseen liittyvän ongelman. Koska esimerkiksi Bitcoinissa käytetty SHA-256 tiivistealgoritmi luo annetusta merkkijonosta aina saman tiivisteen, tehdään oikean tiivisteen arvaamisesta louhijoille hankalaa lisäämällä tiivisteen alkuun jokin määrä nollia \cite{blockchain1}. Vaikeusaste määräytyy louhijoiden määrän (eli käytännössä kokonaislaskentatehokkuuden) mukaan niin, että uusi lohko varmennetaan noin kymmenessä minuutissa. Lohko varmennetaan niin, että louhijat pyrkivät luomaan tiivisteen, jonka alussa on yhtä monta nollaa kuin lohkon tiivisteessä. Koska yksi merkkijono tuottaa tiivistelagoritmilla aina saman tiivisteen, joutuvat louhijat lisäämään tiivisteeseen satunnaisen luvun, mitä kutsutaan nonceksi (eng. \textit{number once}), jolloin riittävällä määrällä yrityksiä joku louhijoista saa luotua sellaisen tiivisteen, missä on vaikeuasteen vaatima määrä nollia tiivisteen alussa. Tämä on yksinkertaistettuna esitetty kaavion \ref{fig_pow} toisessa vaiheessa.
\item Oikean ratkaisun (eli käytännössä oikean tiivisteen tuottaneen noncen) löytänyt käyttäjä lähettää vastauksensa lohkoketjulle ja vastaanottaa ratkaisun löytämisestä palkkion. Palkkioksi käyttäjä saa jonkin määrän lohkoketjun käyttämää kryptovaluuttaa itselleen. Kaavion \ref{fig_pow} viimeinen vaihe käsittelee palkkionjakoa.
\end{enumerate}

Konsensusmekanismeja vertailtaessa PoW:n eduksi mainitaan usein sen suuri hajautuneisuus. Lohkoketjuissa tyypillisesti periaatteena on, että mitä hajautuneempi lohkoketju on, sitä turvallisempi se on, sillä laajasti hajautuneisiin lohkoketjuihin on käytännössä vaikeaa kohdistaa hyökkäys \cite{51attack}. Esimerkiksi Bitcoinia vastaan hyökkääminen vaatisi, että hyökkääjä saisi käyttöönsä yli puolet Bitcoinin louhintaan käytetystä laskentatehosta. Tästä käytetään Bitcoinin tapauksessa nimitystä "51\% Attack".


Tutkielma esittelee seuraavaksi kaksi suurinta PoW-konsensusmekanismilla toimivaa lohkoketjua: Bitcoinin ja Ethereumin.

\input{Ch.21a_Bitcoin}
\input{Ch.21b_Ethereum}

\end{otherlanguage}